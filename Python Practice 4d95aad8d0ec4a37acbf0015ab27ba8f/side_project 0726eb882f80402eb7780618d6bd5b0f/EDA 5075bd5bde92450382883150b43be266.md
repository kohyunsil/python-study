# EDA

```python
# boxplot
def get_boxplot(age):
    fig, (ax1, ax2, ax3) = plt.subplots(1, 3, figsize=(20, 6))

    sns.boxplot(data=df, x='{} 시청자수'.format(age), ax=ax1)
    sns.boxplot(data=df, x='{} 도달자수'.format(age), ax=ax2)
    sns.boxplot(data=df, x='{} GRP'.format(age), ax=ax3)
#     sns.boxplot(data=df, x='{} 도달율 1+'.format(age), ax=ax3)
#     sns.boxplot(data=df, x='{} 도달율 3+'.format(age), ax=ax4)
#     sns.boxplot(data=df, x='{} 도달율 5+'.format(age), ax=ax5)
#     sns.boxplot(data=df, x='{} 도달율 7+'.format(age), ax=ax6)
#     sns.boxplot(data=df, x='{} 도달율 9+'.format(age), ax=ax7)
    

    plt.show()

get_boxplot('20s')
```

```python
# 컬럼의 데이터 나누는 함수
def split(clm):
    global cinema
    cinema['{}'.format(clm)] = cinema['{}'.format(clm)].fillna(0)
    cinema = cinema[cinema['{}'.format(clm)] != 0]
    cinema['{}1'.format(clm)] = cinema['{}'.format(clm)].apply(lambda x: x.split()[0])
    cinema['{}2'.format(clm)] = cinema['{}'.format(clm)].apply(lambda x: x.split()[1])
    return cinema.tail(1)
```

```python
r = split('usa_gross_income')
r = split('worlwide_gross_income')
r = split('budget')
r
```

![EDA%205075bd5bde92450382883150b43be266/Untitled.png](EDA%205075bd5bde92450382883150b43be266/Untitled.png)

```python
def get_advertise(age):
    
    # pivot
    keywordgroup = pd.pivot_table(df, values=['{} 광고횟수'.format(age),'{} 도달자수'.format(age)], index='Advertiser', aggfunc='mean')
    keywordgroup = keywordgroup.sort_values(by='{} 도달자수'.format(age), ascending=False)
    
    # 시각화를 위해 list에 넣기
    x = []
    y = []
    z = []

    for i in range(len(keywordgroup)):
        x.append(keywordgroup.index[i])
        y.append(keywordgroup['{} 광고횟수'.format(age)][i])
        z.append(keywordgroup['{} 도달자수'.format(age)][i])
        
    # 산점도 그리기
    fig, ax = plt.subplots(figsize=(15,8))
    ax.scatter(z, y, alpha=0.7, c = y, s=1000, cmap = 'Set3')

    # ax.set_xscale('linear')
    # ax.set_yscale('log')

    for i, txt in enumerate(x):
        ax.annotate(x[i], xy=(z[i], y[i]), xytext=(z[i], y[i]), fontsize=8)

    plt.title('광고주별 광고횟수당 {} 도달자수'.format(age), fontsize=15)
    ax.set_xlabel('{} 도달자수'.format(age), fontsize=15)
    ax.set_ylabel('{} 광고횟수'.format(age), fontsize=15)

    plt.grid(color='gray', alpha=1, linestyle='--')
    return plt.show()
```

```python
result = get_advertise('20s'), get_advertise('30s'), get_advertise('40s')
```

![EDA%205075bd5bde92450382883150b43be266/Untitled%201.png](EDA%205075bd5bde92450382883150b43be266/Untitled%201.png)

![EDA%205075bd5bde92450382883150b43be266/Untitled%202.png](EDA%205075bd5bde92450382883150b43be266/Untitled%202.png)

![EDA%205075bd5bde92450382883150b43be266/Untitled%203.png](EDA%205075bd5bde92450382883150b43be266/Untitled%203.png)